var InstantClick=function(t,e){function i(t){var e=t.indexOf("#");return 0>e?t:t.substr(0,e)}function n(t){for(;"A"!=t.nodeName;)t=t.parentNode;return t}function o(t,e){for(var i=0;i<z[t].length;i++)z[t][i](e)}function a(e,n,a,r){if(t.title=e,t.documentElement.replaceChild(n,t.body),a){if(history.pushState(null,null,a),e=a.indexOf("#"),e=e>-1&&t.getElementById(a.substr(e+1)),n=0,e)for(;e.offsetParent;)n+=e.offsetTop,e=e.offsetParent;scrollTo(0,n),p=i(a)}else scrollTo(0,r);c(),M.done(),o("change",!1)}function r(t){g(n(t.target).href)}function s(t){t=n(t.target),t.addEventListener("mouseout",h),x?(m=t.href,w=setTimeout(g,x)):g(t.href)}function l(t){t=n(t.target),b?t.removeEventListener("mousedown",r):t.removeEventListener("mouseover",s),g(t.href)}function d(t){1<t.which||t.metaKey||t.ctrlKey||(t.preventDefault(),u(n(t.target).href))}function h(){w?(clearTimeout(w),w=!1):A&&!L&&(v.abort(),L=A=!1)}function f(){if(!(4>v.readyState)&&0!=v.status){if(E.ready=+new Date-E.start,o("receive"),v.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){var e=t.implementation.createHTMLDocument("");e.documentElement.innerHTML=v.responseText,S=e.title,I=e.body;var n=i(C);H[n]={body:I,title:S,scrollY:n in H?H[n].scrollY:0};for(var a,e=e.head.children,n=0,r=e.length-1;r>=0;r--)if(a=e[r],a.hasAttribute("data-instant-track")){a=a.getAttribute("href")||a.getAttribute("src")||a.innerHTML;for(var s=B.length-1;s>=0;s--)B[s]==a&&n++}n!=B.length&&(k=!0)}else k=!0;L&&(L=!1,u(C))}}function c(n){for(var o,a=t.getElementsByTagName("a"),h=e.protocol+"//"+e.host,f=a.length-1;f>=0;f--){o=a[f];var c;if(!((c=o.target)||(c=o.hasAttribute("download"))||(c=0!=o.href.indexOf(h+"/"))||(c=-1<o.href.indexOf("#")&&i(o.href)==p)))if(y){t:{c=o;do{if(!c.hasAttribute)break;if(c.hasAttribute("data-no-instant"))break;if(c.hasAttribute("data-instant")){c=!0;break t}}while(c=c.parentNode);c=!1}c=!c}else t:{c=o;do{if(!c.hasAttribute)break;if(c.hasAttribute("data-instant"))break;if(c.hasAttribute("data-no-instant")){c=!0;break t}}while(c=c.parentNode);c=!1}c||(o.addEventListener("touchstart",l),b?o.addEventListener("mousedown",r):o.addEventListener("mouseover",s),o.addEventListener("click",d))}if(!n)for(n=t.body.getElementsByTagName("script"),f=0,j=n.length;j>f;f++)a=n[f],a.hasAttribute("data-no-instant")||(o=t.createElement("script"),a.src&&(o.src=a.src),a.innerHTML&&(o.innerHTML=a.innerHTML),h=a.parentNode,c=a.nextSibling,h.removeChild(a),h.insertBefore(o,c))}function g(t){(b||!("display"in E&&100>+new Date-(E.start+E.display)))&&(w&&(clearTimeout(w),w=!1),t||(t=m),(!A||t!=C&&!L)&&(A=!0,L=!1,C=t,k=I=!1,E={start:+new Date},o("fetch"),v.open("GET",t),v.send()))}function u(t){"display"in E||(E.display=+new Date-E.start),w?C&&C!=t?e.href=t:(g(t),M.start(0,!0),o("wait"),L=!0):!A||L?e.href=t:k?e.href=C:I?(H[p].scrollY=pageYOffset,L=A=!1,a(S,I,C)):(M.start(0,!0),o("wait"),L=!0)}var p,m,w,v,y,b,x,T=navigator.userAgent,R="createTouch"in t,H={},C=!1,S=!1,k=!1,I=!1,E={},A=!1,L=!1,B=[],z={fetch:[],receive:[],wait:[],change:[]},M=function(){function e(e,a){h=e,t.getElementById(s.id)&&t.body.removeChild(s),s.style.opacity="1",t.getElementById(s.id)&&t.body.removeChild(s),o(),a&&setTimeout(i,0),clearTimeout(f),f=setTimeout(n,500)}function i(){h=10,o()}function n(){h+=1+2*Math.random(),h>=98?h=98:f=setTimeout(n,500),o()}function o(){l.style[d]="translate("+h+"%)",t.getElementById(s.id)||t.body.appendChild(s)}function a(){t.getElementById(s.id)?(clearTimeout(f),h=100,o(),s.style.opacity="0"):(e(100==h?0:h),setTimeout(a,0))}function r(){s.style.left=pageXOffset+"px",s.style.width=innerWidth+"px",s.style.top=pageYOffset+"px";var t="orientation"in window&&90==Math.abs(orientation);s.style[d]="scaleY("+innerWidth/screen[t?"height":"width"]*2+")"}var s,l,d,h,f;return{init:function(){s=t.createElement("div"),s.id="instantclick",l=t.createElement("div"),l.id="instantclick-bar",l.className="instantclick-bar",s.appendChild(l);var e=["Webkit","Moz","O"];if(d="transform",!(d in l.style))for(var i=0;3>i;i++)e[i]+"Transform"in l.style&&(d=e[i]+"Transform");var n="transition";if(!(n in l.style))for(i=0;3>i;i++)e[i]+"Transition"in l.style&&(n="-"+e[i].toLowerCase()+"-"+n);e=t.createElement("style"),e.innerHTML="#instantclick{position:"+(R?"absolute":"fixed")+";top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;"+n+":opacity .25s .1s}.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;"+n+":all .25s}",t.head.appendChild(e),R&&(r(),addEventListener("resize",r),addEventListener("scroll",r))},start:e,done:a}}(),N="pushState"in history&&(!T.match("Android")||T.match("Chrome/"))&&"file:"!=e.protocol;return{supported:N,init:function(){if(!p)if(N){for(var n=arguments.length-1;n>=0;n--){var r=arguments[n];!0===r?y=!0:"mousedown"==r?b=!0:"number"==typeof r&&(x=r)}p=i(e.href),H[p]={body:t.body,title:t.title,scrollY:pageYOffset};for(var s,r=t.head.children,n=r.length-1;n>=0;n--)s=r[n],s.hasAttribute("data-instant-track")&&(s=s.getAttribute("href")||s.getAttribute("src")||s.innerHTML,B.push(s));v=new XMLHttpRequest,v.addEventListener("readystatechange",f),c(!0),M.init(),o("change",!0),addEventListener("popstate",function(){var t=i(e.href);t!=p&&(t in H?(H[p].scrollY=pageYOffset,p=t,a(H[t].title,H[t].body,!1,H[t].scrollY)):e.href=e.href)})}else o("change",!0)},on:function(t,e){z[t].push(e)}}}(document,location);!function(t){"use strict";t.fn.fitVids=function(e){var i={customSelector:null};if(!document.getElementById("fit-vids-style")){var n=document.head||document.getElementsByTagName("head")[0],o=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",a=document.createElement("div");a.innerHTML='<p>x</p><style id="fit-vids-style">'+o+"</style>",n.appendChild(a.childNodes[1])}return e&&t.extend(i,e),this.each(function(){var e=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];i.customSelector&&e.push(i.customSelector);var n=t(this).find(e.join(","));n=n.not("object object"),n.each(function(){var e=t(this);if(!("embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){e.css("height")||e.css("width")||!isNaN(e.attr("height"))&&!isNaN(e.attr("width"))||(e.attr("height",9),e.attr("width",16));var i="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),n=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),o=i/n;if(!e.attr("id")){var a="fitvid"+Math.floor(999999*Math.random());e.attr("id",a)}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*o+"%"),e.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),function(t,e,i){function n(i,n,o){var a=e.createElement(i);return n&&(a.id=J+n),o&&(a.style.cssText=o),t(a)}function o(){return i.innerHeight?i.innerHeight:t(i).height()}function a(e,i){i!==Object(i)&&(i={}),this.cache={},this.el=e,this.value=function(e){var n;return void 0===this.cache[e]&&(n=t(this.el).attr("data-cbox-"+e),void 0!==n?this.cache[e]=n:void 0!==i[e]?this.cache[e]=i[e]:void 0!==X[e]&&(this.cache[e]=X[e])),this.cache[e]},this.get=function(e){var i=this.value(e);return t.isFunction(i)?i.call(this.el,this):i}}function r(t){var e=C.length,i=(K+t)%e;return 0>i?e+i:i}function s(t,e){return Math.round((/%/.test(t)?("x"===e?S.width():o())/100:1)*parseInt(t,10))}function l(t,e){return t.get("photo")||t.get("photoRegex").test(e)}function d(t,e){return t.get("retinaUrl")&&i.devicePixelRatio>1?e.replace(t.get("photoRegex"),t.get("retinaSuffix")):e}function h(t){"contains"in y[0]&&!y[0].contains(t.target)&&t.target!==v[0]&&(t.stopPropagation(),y.focus())}function f(t){f.str!==t&&(y.add(v).removeClass(f.str).addClass(t),f.str=t)}function c(e){K=0,e&&e!==!1&&"nofollow"!==e?(C=t("."+te).filter(function(){var i=t.data(this,Z),n=new a(this,i);return n.get("rel")===e}),K=C.index($.el),-1===K&&(C=C.add($.el),K=C.length-1)):C=t($.el)}function g(i){t(e).trigger(i),se.triggerHandler(i)}function u(i){var o;if(!q){if(o=t(i).data(Z),$=new a(i,o),c($.get("rel")),!_){_=V=!0,f($.get("className")),y.css({visibility:"hidden",display:"block",opacity:""}),k=n(le,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),x.css({width:"",height:""}).append(k),W=T.height()+H.height()+x.outerHeight(!0)-x.height(),D=R.width()+j.width()+x.outerWidth(!0)-x.width(),Y=k.outerHeight(!0),F=k.outerWidth(!0);var r=s($.get("initialWidth"),"x"),l=s($.get("initialHeight"),"y"),d=$.get("maxWidth"),u=$.get("maxHeight");$.w=(d!==!1?Math.min(r,s(d,"x")):r)-F-D,$.h=(u!==!1?Math.min(l,s(u,"y")):l)-Y-W,k.css({width:"",height:$.h}),Q.position(),g(ee),$.get("onOpen"),O.add(A).hide(),y.focus(),$.get("trapFocus")&&e.addEventListener&&(e.addEventListener("focus",h,!0),se.one(ae,function(){e.removeEventListener("focus",h,!0)})),$.get("returnFocus")&&se.one(ae,function(){t($.el).focus()})}var p=parseFloat($.get("opacity"));v.css({opacity:p===p?p:"",cursor:$.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),$.get("closeButton")?N.html($.get("close")).appendTo(x):N.appendTo("<div/>"),w()}}function p(){y||(U=!1,S=t(i),y=n(le).attr({id:Z,"class":t.support.opacity===!1?J+"IE":"",role:"dialog",tabindex:"-1"}).hide(),v=n(le,"Overlay").hide(),E=t([n(le,"LoadingOverlay")[0],n(le,"LoadingGraphic")[0]]),b=n(le,"Wrapper"),x=n(le,"Content").append(A=n(le,"Title"),L=n(le,"Current"),M=t('<button type="button"/>').attr({id:J+"Previous"}),z=t('<button type="button"/>').attr({id:J+"Next"}),B=n("button","Slideshow"),E),N=t('<button type="button"/>').attr({id:J+"Close"}),b.append(n(le).append(n(le,"TopLeft"),T=n(le,"TopCenter"),n(le,"TopRight")),n(le,!1,"clear:left").append(R=n(le,"MiddleLeft"),x,j=n(le,"MiddleRight")),n(le,!1,"clear:left").append(n(le,"BottomLeft"),H=n(le,"BottomCenter"),n(le,"BottomRight"))).find("div div").css({"float":"left"}),I=n(le,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),O=z.add(M).add(L).add(B)),e.body&&!y.parent().length&&t(e.body).append(v,y.append(b,I))}function m(){function i(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),u(this))}return y?(U||(U=!0,z.click(function(){Q.next()}),M.click(function(){Q.prev()}),N.click(function(){Q.close()}),v.click(function(){$.get("overlayClose")&&Q.close()}),t(e).bind("keydown."+J,function(t){var e=t.keyCode;_&&$.get("escKey")&&27===e&&(t.preventDefault(),Q.close()),_&&$.get("arrowKey")&&C[1]&&!t.altKey&&(37===e?(t.preventDefault(),M.click()):39===e&&(t.preventDefault(),z.click()))}),t.isFunction(t.fn.on)?t(e).on("click."+J,"."+te,i):t("."+te).live("click."+J,i)),!0):!1}function w(){var e,o,a,r=Q.prep,h=++de;if(V=!0,P=!1,g(re),g(ie),$.get("onLoad"),$.h=$.get("height")?s($.get("height"),"y")-Y-W:$.get("innerHeight")&&s($.get("innerHeight"),"y"),$.w=$.get("width")?s($.get("width"),"x")-F-D:$.get("innerWidth")&&s($.get("innerWidth"),"x"),$.mw=$.w,$.mh=$.h,$.get("maxWidth")&&($.mw=s($.get("maxWidth"),"x")-F-D,$.mw=$.w&&$.w<$.mw?$.w:$.mw),$.get("maxHeight")&&($.mh=s($.get("maxHeight"),"y")-Y-W,$.mh=$.h&&$.h<$.mh?$.h:$.mh),e=$.get("href"),G=setTimeout(function(){E.show()},100),$.get("inline")){var f=t(e);a=t("<div>").hide().insertBefore(f),se.one(re,function(){a.replaceWith(f)}),r(f)}else $.get("iframe")?r(" "):$.get("html")?r($.get("html")):l($,e)?(e=d($,e),P=$.get("createImg"),t(P).addClass(J+"Photo").bind("error",function(){r(n(le,"Error").html($.get("imgError")))}).one("load",function(){h===de&&setTimeout(function(){var t;$.get("retinaImage")&&i.devicePixelRatio>1&&(P.height=P.height/i.devicePixelRatio,P.width=P.width/i.devicePixelRatio),$.get("scalePhotos")&&(o=function(){P.height-=P.height*t,P.width-=P.width*t},$.mw&&P.width>$.mw&&(t=(P.width-$.mw)/P.width,o()),$.mh&&P.height>$.mh&&(t=(P.height-$.mh)/P.height,o())),$.h&&(P.style.marginTop=Math.max($.mh-P.height,0)/2+"px"),C[1]&&($.get("loop")||C[K+1])&&(P.style.cursor="pointer",P.onclick=function(){Q.next()}),P.style.width=P.width+"px",P.style.height=P.height+"px",r(P)},1)}),P.src=e):e&&I.load(e,$.get("data"),function(e,i){h===de&&r("error"===i?n(le,"Error").html($.get("xhrError")):t(this).contents())})}var v,y,b,x,T,R,j,H,C,S,k,I,E,A,L,B,z,M,N,O,$,W,D,Y,F,K,P,_,V,q,G,Q,U,X={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return t(this).attr("href")},title:function(){return this.title},createImg:function(){var e=new Image,i=t(this).data("cbox-img-attrs");return"object"==typeof i&&t.each(i,function(t,i){e[t]=i}),e},createIframe:function(){var i=e.createElement("iframe"),n=t(this).data("cbox-iframe-attrs");return"object"==typeof n&&t.each(n,function(t,e){i[t]=e}),"frameBorder"in i&&(i.frameBorder=0),"allowTransparency"in i&&(i.allowTransparency="true"),i.name=(new Date).getTime(),i.allowFullScreen=!0,i}},Z="colorbox",J="cbox",te=J+"Element",ee=J+"_open",ie=J+"_load",ne=J+"_complete",oe=J+"_cleanup",ae=J+"_closed",re=J+"_purge",se=t("<a/>"),le="div",de=0,he={},fe=function(){function t(){clearTimeout(r)}function e(){($.get("loop")||C[K+1])&&(t(),r=setTimeout(Q.next,$.get("slideshowSpeed")))}function i(){B.html($.get("slideshowStop")).unbind(l).one(l,n),se.bind(ne,e).bind(ie,t),y.removeClass(s+"off").addClass(s+"on")}function n(){t(),se.unbind(ne,e).unbind(ie,t),B.html($.get("slideshowStart")).unbind(l).one(l,function(){Q.next(),i()}),y.removeClass(s+"on").addClass(s+"off")}function o(){a=!1,B.hide(),t(),se.unbind(ne,e).unbind(ie,t),y.removeClass(s+"off "+s+"on")}var a,r,s=J+"Slideshow_",l="click."+J;return function(){a?$.get("slideshow")||(se.unbind(oe,o),o()):$.get("slideshow")&&C[1]&&(a=!0,se.one(oe,o),$.get("slideshowAuto")?i():n(),B.show())}}();t[Z]||(t(p),Q=t.fn[Z]=t[Z]=function(e,i){var n,o=this;return e=e||{},t.isFunction(o)&&(o=t("<a/>"),e.open=!0),o[0]?(p(),m()&&(i&&(e.onComplete=i),o.each(function(){var i=t.data(this,Z)||{};t.data(this,Z,t.extend(i,e))}).addClass(te),n=new a(o[0],e),n.get("open")&&u(o[0])),o):o},Q.position=function(e,i){function n(){T[0].style.width=H[0].style.width=x[0].style.width=parseInt(y[0].style.width,10)-D+"px",x[0].style.height=R[0].style.height=j[0].style.height=parseInt(y[0].style.height,10)-W+"px"}var a,r,l,d=0,h=0,f=y.offset();if(S.unbind("resize."+J),y.css({top:-9e4,left:-9e4}),r=S.scrollTop(),l=S.scrollLeft(),$.get("fixed")?(f.top-=r,f.left-=l,y.css({position:"fixed"})):(d=r,h=l,y.css({position:"absolute"})),h+=$.get("right")!==!1?Math.max(S.width()-$.w-F-D-s($.get("right"),"x"),0):$.get("left")!==!1?s($.get("left"),"x"):Math.round(Math.max(S.width()-$.w-F-D,0)/2),d+=$.get("bottom")!==!1?Math.max(o()-$.h-Y-W-s($.get("bottom"),"y"),0):$.get("top")!==!1?s($.get("top"),"y"):Math.round(Math.max(o()-$.h-Y-W,0)/2),y.css({top:f.top,left:f.left,visibility:"visible"}),b[0].style.width=b[0].style.height="9999px",a={width:$.w+F+D,height:$.h+Y+W,top:d,left:h},e){var c=0;t.each(a,function(t){return a[t]!==he[t]?(c=e,void 0):void 0}),e=c}he=a,e||y.css(a),y.dequeue().animate(a,{duration:e||0,complete:function(){n(),V=!1,b[0].style.width=$.w+F+D+"px",b[0].style.height=$.h+Y+W+"px",$.get("reposition")&&setTimeout(function(){S.bind("resize."+J,Q.position)},1),t.isFunction(i)&&i()},step:n})},Q.resize=function(t){var e;_&&(t=t||{},t.width&&($.w=s(t.width,"x")-F-D),t.innerWidth&&($.w=s(t.innerWidth,"x")),k.css({width:$.w}),t.height&&($.h=s(t.height,"y")-Y-W),t.innerHeight&&($.h=s(t.innerHeight,"y")),t.innerHeight||t.height||(e=k.scrollTop(),k.css({height:"auto"}),$.h=k.height()),k.css({height:$.h}),e&&k.scrollTop(e),Q.position("none"===$.get("transition")?0:$.get("speed")))},Q.prep=function(i){function o(){return $.w=$.w||k.width(),$.w=$.mw&&$.mw<$.w?$.mw:$.w,$.w}function s(){return $.h=$.h||k.height(),$.h=$.mh&&$.mh<$.h?$.mh:$.h,$.h}if(_){var h,c="none"===$.get("transition")?0:$.get("speed");k.remove(),k=n(le,"LoadedContent").append(i),k.hide().appendTo(I.show()).css({width:o(),overflow:$.get("scrolling")?"auto":"hidden"}).css({height:s()}).prependTo(x),I.hide(),t(P).css({"float":"none"}),f($.get("className")),h=function(){function i(){t.support.opacity===!1&&y[0].style.removeAttribute("filter")}var n,o,s=C.length;_&&(o=function(){clearTimeout(G),E.hide(),g(ne),$.get("onComplete")},A.html($.get("title")).show(),k.show(),s>1?("string"==typeof $.get("current")&&L.html($.get("current").replace("{current}",K+1).replace("{total}",s)).show(),z[$.get("loop")||s-1>K?"show":"hide"]().html($.get("next")),M[$.get("loop")||K?"show":"hide"]().html($.get("previous")),fe(),$.get("preloading")&&t.each([r(-1),r(1)],function(){var i,n=C[this],o=new a(n,t.data(n,Z)),r=o.get("href");r&&l(o,r)&&(r=d(o,r),i=e.createElement("img"),i.src=r)})):O.hide(),$.get("iframe")?(n=$.get("createIframe"),$.get("scrolling")||(n.scrolling="no"),t(n).attr({src:$.get("href"),"class":J+"Iframe"}).one("load",o).appendTo(k),se.one(re,function(){n.src="//about:blank"}),$.get("fastIframe")&&t(n).trigger("load")):o(),"fade"===$.get("transition")?y.fadeTo(c,1,i):i())},"fade"===$.get("transition")?y.fadeTo(c,0,function(){Q.position(0,h)}):Q.position(c,h)}},Q.next=function(){!V&&C[1]&&($.get("loop")||C[K+1])&&(K=r(1),u(C[K]))},Q.prev=function(){!V&&C[1]&&($.get("loop")||K)&&(K=r(-1),u(C[K]))},Q.close=function(){_&&!q&&(q=!0,_=!1,g(oe),$.get("onCleanup"),S.unbind("."+J),v.fadeTo($.get("fadeOut")||0,0),y.stop().fadeTo($.get("fadeOut")||0,0,function(){y.hide(),v.hide(),g(re),k.remove(),setTimeout(function(){q=!1,g(ae),$.get("onClosed")},1)}))},Q.remove=function(){y&&(y.stop(),t[Z].close(),y.stop(!1,!0).remove(),v.remove(),q=!1,y=null,t("."+te).removeData(Z).removeClass(te),t(e).unbind("click."+J).unbind("keydown."+J))},Q.element=function(){return t($.el)},Q.settings=X)}(jQuery,document,window),function(t){t.fn.justifiedGallery=function(e){function i(t,e,i){var n;return n=t>e?t:e,100>=n?i.settings.sizeRangeSuffixes.lt100:240>=n?i.settings.sizeRangeSuffixes.lt240:320>=n?i.settings.sizeRangeSuffixes.lt320:500>=n?i.settings.sizeRangeSuffixes.lt500:640>=n?i.settings.sizeRangeSuffixes.lt640:i.settings.sizeRangeSuffixes.lt1024}function n(t,e){return-1!==t.indexOf(e,t.length-e.length)}function o(t,e){return t.substring(0,t.length-e.length)}function a(t,e){var i=!1;for(var o in e.settings.sizeRangeSuffixes)if(0!==e.settings.sizeRangeSuffixes[o].length){if(n(t,e.settings.sizeRangeSuffixes[o]))return e.settings.sizeRangeSuffixes[o]}else i=!0;if(i)return"";throw"unknown suffix for "+t}function r(t,e,n,r){var s=t.match(r.settings.extension),l=null!=s?s[0]:"",d=t.replace(r.settings.extension,"");return d=o(d,a(d,r)),d+=i(e,n,r)+l}function s(e){var i=t(e.currentTarget).find(".caption");e.data.settings.cssAnimation?i.addClass("caption-visible").removeClass("caption-hidden"):i.stop().fadeTo(e.data.settings.captionSettings.animationDuration,e.data.settings.captionSettings.visibleOpacity)}function l(e){var i=t(e.currentTarget).find(".caption");e.data.settings.cssAnimation?i.removeClass("caption-visible").removeClass("caption-hidden"):i.stop().fadeTo(e.data.settings.captionSettings.animationDuration,e.data.settings.captionSettings.nonVisibleOpacity)}function d(t,e,i){i.settings.cssAnimation?(t.addClass("entry-visible"),e()):t.stop().fadeTo(i.settings.imagesAnimationDuration,1,e)}function h(t,e){e.settings.cssAnimation?t.removeClass("entry-visible"):t.stop().fadeTo(0,0)}function f(t){var e=t.find("> img");return 0===e.length&&(e=t.find("> a > img")),e}function c(e,i,n,o,a,h,c){function g(){p!==m&&u.attr("src",m)}var u=f(e);u.css("width",o),u.css("height",a),u.css("margin-left",-o/2),u.css("margin-top",-a/2),e.width(o),e.height(h),e.css("top",n),e.css("left",i);var p=u.attr("src"),m=r(p,o,a,c);u.one("error",function(){u.attr("src",u.data("jg.originalSrc"))}),"skipped"===u.data("jg.loaded")?R(p,function(){d(e,g,c),u.data("jg.loaded",!0)}):d(e,g,c);var w=e.data("jg.captionMouseEvents");if(c.settings.captions===!0){var v=e.find(".caption");if(0===v.length){var y=u.attr("alt");"undefined"==typeof y&&(y=e.attr("title")),"undefined"!=typeof y&&(v=t('<div class="caption">'+y+"</div>"),e.append(v))}0!==v.length&&(c.settings.cssAnimation||v.stop().fadeTo(c.settings.imagesAnimationDuration,c.settings.captionSettings.nonVisibleOpacity),"undefined"==typeof w&&(w={mouseenter:s,mouseleave:l},e.on("mouseenter",void 0,c,w.mouseenter),e.on("mouseleave",void 0,c,w.mouseleave),e.data("jg.captionMouseEvents",w)))}else"undefined"!=typeof w&&(e.off("mouseenter",void 0,c,w.mouseenter),e.off("mouseleave",void 0,c,w.mouseleave),e.removeData("jg.captionMouseEvents"))}function g(t,e){var i,n,o,a,r,s,l=t.settings,d=!0,h=0,c=t.galleryWidth-2*t.border-(t.buildingRow.entriesBuff.length-1)*l.margins,g=c/t.buildingRow.aspectRatio,u=t.buildingRow.width/c>l.justifyThreshold;if(e&&"hide"===l.lastRow&&!u){for(i=0;i<t.buildingRow.entriesBuff.length;i++)n=t.buildingRow.entriesBuff[i],l.cssAnimation?n.removeClass("entry-visible"):n.stop().fadeTo(0,0);return-1}for(e&&!u&&"nojustify"===l.lastRow&&(d=!1),i=0;i<t.buildingRow.entriesBuff.length;i++)o=f(t.buildingRow.entriesBuff[i]),a=o.data("jg.imgw")/o.data("jg.imgh"),d?(r=i===t.buildingRow.entriesBuff.length-1?c:g*a,s=g):(r=l.rowHeight*a,s=l.rowHeight),c-=Math.round(r),o.data("jg.jimgw",Math.round(r)),o.data("jg.jimgh",Math.ceil(s)),(0===i||h>s)&&(h=s);return l.fixedHeight&&h>l.rowHeight&&(h=l.rowHeight),{minHeight:h,justify:d}}function u(t){t.lastAnalyzedIndex=-1,t.buildingRow.entriesBuff=[],t.buildingRow.aspectRatio=0,t.buildingRow.width=0,t.offY=t.border}function p(t,e){var i,n,o,a,r=t.settings,s=t.border;if(a=g(t,e),o=a.minHeight,e&&"hide"===r.lastRow&&-1===o)return t.buildingRow.entriesBuff=[],t.buildingRow.aspectRatio=0,t.buildingRow.width=0,void 0;r.maxRowHeight>0&&r.maxRowHeight<o?o=r.maxRowHeight:0===r.maxRowHeight&&1.5*r.rowHeight<o&&(o=1.5*r.rowHeight);for(var l=0;l<t.buildingRow.entriesBuff.length;l++)i=t.buildingRow.entriesBuff[l],n=f(i),c(i,s,t.offY,n.data("jg.jimgw"),n.data("jg.jimgh"),o,t),s+=n.data("jg.jimgw")+r.margins;t.$gallery.height(t.offY+o+t.border+(t.spinner.active?t.spinner.$el.innerHeight():0)),(!e||o<=t.settings.rowHeight&&a.justify)&&(t.offY+=o+t.settings.margins,t.buildingRow.entriesBuff=[],t.buildingRow.aspectRatio=0,t.buildingRow.width=0,t.$gallery.trigger("jg.rowflush"))}function m(t){t.checkWidthIntervalId=setInterval(function(){var e=parseInt(t.$gallery.width(),10);t.galleryWidth!==e&&(t.galleryWidth=e,u(t),b(t,!0))},t.settings.refreshTime)}function w(t){clearInterval(t.intervalId),t.intervalId=setInterval(function(){t.phase<t.$points.length?t.$points.eq(t.phase).fadeTo(t.timeslot,1):t.$points.eq(t.phase-t.$points.length).fadeTo(t.timeslot,0),t.phase=(t.phase+1)%(2*t.$points.length)},t.timeslot)}function v(t){clearInterval(t.intervalId),t.intervalId=null}function y(t){t.yield.flushed=0,null!==t.imgAnalyzerTimeout&&clearTimeout(t.imgAnalyzerTimeout)}function b(t,e){y(t),t.imgAnalyzerTimeout=setTimeout(function(){x(t,e)},.001),x(t,e)}function x(e,i){for(var n,o=e.settings,a=e.lastAnalyzedIndex+1;a<e.entries.length;a++){var r=t(e.entries[a]),s=f(r);if(s.data("jg.loaded")===!0||"skipped"===s.data("jg.loaded")){n=a>=e.entries.length-1;var l=e.galleryWidth-2*e.border-(e.buildingRow.entriesBuff.length-1)*o.margins,d=s.data("jg.imgw")/s.data("jg.imgh");if(l/(e.buildingRow.aspectRatio+d)<o.rowHeight&&(p(e,n),++e.yield.flushed>=e.yield.every))return b(e,i),void 0;e.buildingRow.entriesBuff.push(r),e.buildingRow.aspectRatio+=d,e.buildingRow.width+=d*o.rowHeight,e.lastAnalyzedIndex=a}else if("error"!==s.data("jg.loaded"))return}e.buildingRow.entriesBuff.length>0&&p(e,!0),e.spinner.active&&(e.spinner.active=!1,e.$gallery.height(e.$gallery.height()-e.spinner.$el.innerHeight()),e.spinner.$el.detach(),v(e.spinner)),y(e),i?e.$gallery.trigger("jg.resize"):e.$gallery.trigger("jg.complete")}function T(t){function e(t){if("string"!=typeof n.sizeRangeSuffixes[t])throw"sizeRangeSuffixes."+t+" must be a string"}function i(t,e){if("string"==typeof t[e]){if(t[e]=parseFloat(t[e],10),isNaN(t[e]))throw"invalid number for "+e}else{if("number"!=typeof t[e])throw e+" must be a number";if(isNaN(t[e]))throw"invalid number for "+e}}var n=t.settings;if("object"!=typeof n.sizeRangeSuffixes)throw"sizeRangeSuffixes must be defined and must be an object";if(e("lt100"),e("lt240"),e("lt320"),e("lt500"),e("lt640"),e("lt1024"),i(n,"rowHeight"),i(n,"maxRowHeight"),n.maxRowHeight>0&&n.maxRowHeight<n.rowHeight&&(n.maxRowHeight=n.rowHeight),i(n,"margins"),i(n,"border"),"nojustify"!==n.lastRow&&"justify"!==n.lastRow&&"hide"!==n.lastRow)throw'lastRow must be "nojustify", "justify" or "hide"';if(i(n,"justifyThreshold"),n.justifyThreshold<0||n.justifyThreshold>1)throw"justifyThreshold must be in the interval [0,1]";if("boolean"!=typeof n.cssAnimation)throw"cssAnimation must be a boolean";if(i(n.captionSettings,"animationDuration"),i(n,"imagesAnimationDuration"),i(n.captionSettings,"visibleOpacity"),n.captionSettings.visibleOpacity<0||n.captionSettings.visibleOpacity>1)throw"captionSettings.visibleOpacity must be in the interval [0, 1]";if(i(n.captionSettings,"nonVisibleOpacity"),n.captionSettings.visibleOpacity<0||n.captionSettings.visibleOpacity>1)throw"captionSettings.nonVisibleOpacity must be in the interval [0, 1]";if("boolean"!=typeof n.fixedHeight)throw"fixedHeight must be a boolean";if("boolean"!=typeof n.captions)throw"captions must be a boolean";if(i(n,"refreshTime"),"boolean"!=typeof n.randomize)throw"randomize must be a boolean"}function R(e,i,n){if(i||n){var o=new Image,a=t(o);i&&a.one("load",function(){a.off("load error"),i(o)}),n&&a.one("error",function(){a.off("load error"),n(o)}),o.src=e}}var j={sizeRangeSuffixes:{lt100:"",lt240:"",lt320:"",lt500:"",lt640:"",lt1024:""},rowHeight:120,maxRowHeight:0,margins:1,border:-1,lastRow:"nojustify",justifyThreshold:.75,fixedHeight:!1,waitThumbnailsLoad:!0,captions:!0,cssAnimation:!1,imagesAnimationDuration:500,captionSettings:{animationDuration:500,visibleOpacity:.7,nonVisibleOpacity:0},rel:null,target:null,extension:/\.[^.\\/]+$/,refreshTime:100,randomize:!1};return this.each(function(i,n){var o=t(n);o.addClass("justified-gallery");var a=o.data("jg.context");if("undefined"==typeof a){if("undefined"!=typeof e&&null!==e&&"object"!=typeof e)throw"The argument must be an object";var r=t('<div class="spinner"><span></span><span></span><span></span></div>'),s=t.extend({},j,e),l=s.border>=0?s.border:s.margins;a={settings:s,imgAnalyzerTimeout:null,entries:null,buildingRow:{entriesBuff:[],width:0,aspectRatio:0},lastAnalyzedIndex:-1,yield:{every:2,flushed:0},border:l,offY:l,spinner:{active:!1,phase:0,timeslot:150,$el:r,$points:r.find("span"),intervalId:null},checkWidthIntervalId:null,galleryWidth:o.width(),$gallery:o},o.data("jg.context",a)}else if("norewind"===e)for(var d=0;d<a.buildingRow.entriesBuff.length;d++)h(a.buildingRow.entriesBuff[d],a);else a.settings=t.extend({},a.settings,e),a.border=a.settings.border>=0?a.settings.border:a.settings.margins,u(a);if(T(a),a.entries=o.find("> a, > div:not(.spinner)").toArray(),0!==a.entries.length){a.settings.randomize&&(a.entries.sort(function(){return 2*Math.random()-1}),t.each(a.entries,function(){t(this).appendTo(o)}));var c=!1,g=!1;t.each(a.entries,function(e,i){var n=t(i),r=f(n);if(n.addClass("jg-entry"),r.data("jg.loaded")!==!0&&"skipped"!==r.data("jg.loaded")){null!==a.settings.rel&&n.attr("rel",a.settings.rel),null!==a.settings.target&&n.attr("target",a.settings.target);var s="undefined"!=typeof r.data("safe-src")?r.data("safe-src"):r.attr("src");r.data("jg.originalSrc",s),r.attr("src",s);var l=parseInt(r.attr("width"),10),d=parseInt(r.attr("height"),10);if(a.settings.waitThumbnailsLoad!==!0&&!isNaN(l)&&!isNaN(d))return r.data("jg.imgw",l),r.data("jg.imgh",d),r.data("jg.loaded","skipped"),g=!0,b(a,!1),!0;r.data("jg.loaded",!1),c=!0,a.spinner.active===!1&&(a.spinner.active=!0,o.append(a.spinner.$el),o.height(a.offY+a.spinner.$el.innerHeight()),w(a.spinner)),R(s,function(t){r.data("jg.imgw",t.width),r.data("jg.imgh",t.height),r.data("jg.loaded",!0),b(a,!1)},function(){r.data("jg.loaded","error"),b(a,!1)})}}),c||g||b(a,!1),m(a)}})}}(jQuery),$(function(){var t=$(".gallery p");t.find("img").each(function(){var t=$(this);t.wrap(function(){return"<a href='"+t.attr("src")+"'></a>"}).parent("a").css({cursor:"default"}).click(function(t){return console.log($(this)),t.preventDefault(),!1})}),t.justifiedGallery({rowHeight:150,captions:!1,lastRow:"justify",margins:15,maxRowHeight:-1}).on("jg.complete",function(){$(this).find("a").colorbox({maxWidth:"80%",maxHeight:"80%",opacity:.8,transition:"elastic",current:"",rel:"group1"})}),$(".page-single article").find("h2, h3, h4, h5, h6").each(function(t,e){var i,n;return i=$(e),n=i.attr("id")?i.attr("id"):i.parent().attr("id"),n?i.append($("<a />").addClass("header-link icon-link").attr("href","#"+n).html("")):void 0})});